<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            /* 上 50，右 0， 下 0，左 150 */
            padding: 50px 0 0 150px;
        }

        .btn {
            width: 100px;
            height: 100px;
            margin-right: 20px;
            font-size: 80px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <button class="btn">0</button>
    <button class="btn">1</button>
    <button class="btn">2</button>
    <script>
        // 实现点击哪个按钮，就在控制台输出哪个按钮对应的数字
  
        // 1.使用 var，容易犯的典型错误
        // var btns = document.querySelectorAll('.btn');
        // for (var i = 0; i < btns.length; i++) {
        //     btns[i].addEventListener(
        //         'click',
        //         function () {
        //             console.log(i);
        //         },
        //         false
        //     );
        // }
        // 点击所有按钮，都输出 3，因为 i 是全局变量，循环结束后，i 的值为 3

        // 2.使用闭包，解决上面的问题
        // var btns = document.querySelectorAll('.btn');
        // for (var i = 0; i < btns.length; i++) {
        //     (function (index) {
        //         btns[index].addEventListener(
        //             'click',
        //             function () {
        //                 console.log(index);
        //             },
        //             false
        //         );
        //     })(i);
        // }

        // 3.使用 let/const，解决上面的问题
        let btns = document.querySelectorAll('.btn');
        for (let i = 0; i < btns.length; i++) {
            btns[i].addEventListener(
                'click',
                function () {
                    console.log(i);
                },
                false
            );
        }
        // 因为使用了 let 关键字来声明变量 i，所以每次for循环的迭代都会为变量 i 创建一个新的块级作用域。这是 JavaScript 的特殊之处。
        // 注意在别的编程语言如如 Java 中，for 循环不会为每次迭代创建新的作用域。
    </script>
</body>
</html>